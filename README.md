é˜¿ğŸ±é˜¿ğŸ¶=maomao algo=æ¯›æ¯›çš„ç®—æ³•ç¬”è®°

##### Table of Contents  
[å…³äºæœ¬ä¹¦](#å…³äºæœ¬ä¹¦)  
[DFS](#dfs)  

# å…³äºæœ¬ä¹¦
ä½œä¸ºä¸€ä¸ªç®—æ³•å°ç™½ï¼Œåœ¨åŠ›æ‰£å’Œä¹¦æœ¬ä¹‹é—´æ¥å›ï¼Œçœ‹äº†å¾ˆå¤šå¤§ç¥è€å¿ƒçš„è§£ç­”å’Œæ€»ç»“ï¼Œä¹¦æœ¬é‡Œå¾ªå¾ªå–„è¯±çš„çŸ¥è¯†æ•´ç†ã€‚æ€»æƒ³ç”¨ä¸€å¼ è¡¨æ ¼æ¥æ¢³ç†å‡ºç®—æ³•çš„çŸ¥è¯†ä½“ç³»ï¼Œå´ä¹Ÿä¸€ç›´æ²¡æœ‰æ—¶é—´æ•´ç†ã€‚è¿™æœ¬ç¬”è®°é‡Œï¼Œæˆ‘é€‰æ‹©ç”¨æ¯”è¾ƒç®€å•çš„Pythonè¯­è¨€æ¥å›é¡¾ä¸€ä¸‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„åŸºæœ¬çŸ¥è¯†ã€‚

ç›®çš„ä¸æ˜¯è¦†ç›–æ‰€æœ‰çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯æƒ³è¦æŠŠè‡ªå·±è¯»çš„ä¹¦è¶Šè¯»è¶Šè–„ã€‚ç”¨å°½é‡æµ…æ˜¾çš„ç†è§£æ¥å®ç°æ¯”è¾ƒå¸¸è§å’Œå®ç”¨çš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œä¹Ÿå½“æ˜¯å¯¹è‡ªå·±å­¦ä¹ çš„æ€»ç»“ï¼Œå¯èƒ½èƒ½å¸®åˆ°è¯»è€…ã€‚å½“ä¸­æœ‰ä»€ä¹ˆç–æ¼å’Œé”™è¯¯å¯ä»¥ç›´æ¥è¯„è®ºã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹©Pythonï¼Ÿ
å½“ç„¶æ˜¯å› ä¸ºå¥½å†™å•¦ï¼

å¹³æ—¶åœ¨é˜…è¯»çš„æ—¶å€™å‘ç°ï¼Œå¾ˆå¤šç»å…¸ç®—æ³•ä¹¦éƒ½æ˜¯ç”¨Javaæˆ–C++æ¼”ç¤ºä»£ç çš„ï¼Œè™½ç„¶ä¹Ÿæ–¹ä¾¿ç†è§£ï¼Œä½†æ˜¯ç”¨Pythonæ¥ä½œä¸ºèŒƒä¾‹çš„ä¸ç®—å¤šæ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸»è¦æ¥åšä¸¤ä»¶äº‹ï¼š

1. ç”¨Pythonç®€å•å®ç°åŸºç¡€çš„æ•°æ®ç»“æ„ã€‚æœ‰äº›æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚è¯´OrderedDictï¼‰éƒ½ç°æˆè°ƒåº“å°±è¡Œäº†ï¼Œä½†æ˜¯ä¸ºäº†ç†è§£å®ƒä»¬çš„è¯»å†™é€Ÿåº¦å•Šï¼Œä¼˜ç¼ºç‚¹å•Šï¼Œç”¨ç›¸å¯¹ç®€å•çš„æ•°æ®ç»“æ„ï¼ˆæ•°ç»„å’Œé“¾è¡¨ï¼‰æ¥ç®€å•å®ç°èƒ½å¸®åŠ©ç†è§£ã€‚
2. ä»‹ç»åŸºæœ¬ç®—æ³•ï¼Œæä¾›ä¸€äº›ç®—æ³•æ¨¡ç‰ˆã€‚ï¼ˆ1ï¼‰æœç´¢æ–¹æ³•ï¼Œï¼ˆ2ï¼‰ç”¨åŠ¨æ€è§„åˆ’æ¥ä¼˜åŒ–æœç´¢é€Ÿåº¦ï¼Œï¼ˆ3ï¼‰å¦‚ä½•æ±‚è§£å›¾çš„æ€§è´¨æˆ–æœ€å€¼ï¼Œï¼ˆ4ï¼‰å¦‚ä½•ç”¨æ•°æ®æµæˆ–å¤šä¸ªæœºå™¨æ¥å†åŠ é€Ÿã€‚ç®—æ³•ä¸»è¦æ˜¯æä¾›ä¸€äº›æ€ç»´æ–¹å¼ï¼Œè®©æˆ‘ä»¬ä»â€œèƒ½è§£å†³â€œåˆ°â€œèƒ½é«˜æ•ˆè§£å†³â€œåœ°é—®é¢˜ã€‚

## ç®—æ³•æ€»ç»“
å¾ˆå¤šç®—æ³•éƒ½æœ‰â€œä¸€è„‰ç›¸æ‰¿â€œçš„æ€è·¯ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘æŠŠç®—æ³•çš„ä»‹ç»é¡ºåºå˜æˆï¼šæœç´¢ç®—æ³•-->åŠ¨æ€è§„åˆ’-->å›¾è®ºï¼Œå› ä¸ºæˆ‘è§‰å¾—æœ‰äº›ç®—æ³•è¿™æ ·å¼•å‡ºè¿™æ ·æ¯”è¾ƒå¥½ç†è§£ã€‚

| å¼•å­      | ç®—æ³• |
| ----------- | ----------- |
| [DFS](#dfs)      | (DP)[#dp] / å¯ä»¥ç†è§£ä¸ºå¸¦å¤‡å¿˜å½•çš„DFSï¼ˆMemoizationï¼‰  |

# DFS
```python
def dfs(x):
  if x ...: # base case condition
    return ... # base case

  res = ... # initialization
  ... # business lgic
  return res
```

### DFS Example 1:
åœ¨ä¸€å®¶å…¬å¸ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ¯ä¸ªå‘˜å·¥æœ‰å‡ ä¸ªä¸‹å±ã€‚é‚£ä¹ˆæˆ‘ä»¬ç»™æ¯ä¸€ä¸ªå‘˜å·¥ä¸€ä¸ªåˆ†æ•°Scoreï¼šå¦‚æœTAæ²¡æœ‰ä¸‹çº§ï¼Œé‚£ä¹ˆScore=1ï¼Œå¦åˆ™Score=ä¸‹çº§çš„ä¸ªæ•°+1ï¼ˆè‡ªèº«ï¼‰ã€‚æˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªå‘˜å·¥çœ‹æˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¬å¸ä»CEOå¼€å§‹ä½œä¸ºæ ¹èŠ‚ç‚¹å°±å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ã€‚
é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šç»™å®šä¸€ä¸ªå…¬å¸ç»“æ„å’Œå‘˜å·¥å·ï¼Œæˆ‘ä»¬å¦‚ä½•æŸ¥æ‰¾TAçš„scoreï¼Ÿè¿™æ ·çš„é—®é¢˜ä¸€èˆ¬ç”¨DFSæ¥é€’å½’è§£å†³ã€‚

#### Solutionï¼šä¸€æ¬¡æ±‚è§£
```python
def dfs(graph, id):
    if id not in graph: return 0 # base case
    score = 1                    # è‡ªå·±
    for e in graph[id]:          # ä¸‹å±
        score += dfs(graph, e)
    return score
```

DFSæœç´¢ç»å¸¸å‡ºç°çš„é—®é¢˜å°±æ˜¯é‡å¤æŸ¥è¯¢ã€‚æ¯”å¦‚è¯´åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¸¤æ¬¡åˆ†åˆ«æŸ¥è¯¢å‘˜å·¥ä¸TAçš„è€æ¿ï¼Œé‚£ä¹ˆå‘˜å·¥çš„scoreå°±æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ä¿¡æ¯ã€‚å¯¹äºè¿™æ ·çš„é‡å¤å­é—®é¢˜ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š
* å¤‡å¿˜å½•ï¼šåœ¨è‡ªé¡¶å‘ä¸‹é€’å½’çš„æœ€å¤–é¢åŠ ä¸€ä¸ªcacheï¼ˆæˆ–è€…memoï¼‰æ¥å­˜å‚¨å·²ç»æ±‚è§£äº†çš„ç­”æ¡ˆã€‚åœ¨åŠ¨æ€è§„åˆ’çš„ä»‹ç»ä¸­æˆ‘ä»¬å†é‡æ¸©è¿™ä¸ªè¯é¢˜ã€‚
* åŠ¨æ€è§„åˆ’ï¼šåˆ©ç”¨å­é—®é¢˜çš„ç»“æ„ï¼Œç”¨è‡ªåº•å‘ä¸Šçš„æ–¹æ³•æ¥æ¶ˆç­é‡å¤æŸ¥è¯¢ã€‚æ¯”å¦‚ç»ƒä¹ ã€ŠéªŒè¯å¹³è¡¡äºŒå‰æ ‘ã€‹ï¼Œä¸åƒåŠ¨æ€è§„åˆ’ï¼Œç„¶è€Œç”¨äº†è¿™æ ·çš„æ€è·¯ã€‚

#### Solution 2ï¼šå¸¦Cacheçš„æ±‚è§£
```python
cache = {} # id: score
def dfs(graph, id):
    if id not in graph: return 0 # base case
    
    if id in cache: return cache[id]
    score = 1                    # è‡ªå·±
    for e in graph[id]:          # ä¸‹å±
        score += dfs(graph, e)

    cache[id] = score
    return res
```

è®¨è®ºï¼šå¦‚æœé¢å¯¹å¤šæ¬¡æŸ¥æ‰¾çš„åŒæ—¶ï¼Œå¯¹æ ‘çš„ç»“æ„è¿˜å¯èƒ½æœ‰æ”¹å˜ï¼ˆå…¬å¸å˜åŠ¨ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦çµæ´»æ”¹å˜cache(cache invalidation)æ¥åº”å¯¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æ‹“å±•cacheæ¥å­˜å‚¨ä»¥ä¸‹å†…å®¹cache: id -> score, manager_id, set(report_id)
è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ç›¸å½“äºæ‹¥æœ‰äº†å¯¹çˆ¶èŠ‚ç‚¹ï¼ˆè€æ¿ï¼‰çš„æŒ‡é’ˆã€‚ä¸€æ—¦æœ‰ä¸€ä¸ªsubtreeï¼ˆéƒ¨é—¨ï¼‰æœ‰æ”¹å˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ä¸Šéå†ï¼Œæ¥æ”¹åŠ¨ä»–ä»¬åœ¨cacheä¸­çš„scoreã€‚


### DFS Example 2
ç»™å®šä¸€å¼ è¿·å®«ï¼Œå…¥å£entranceä¸å‡ºå£exitï¼Œå¦‚ä½•ä»entranceåˆ°è¾¾exitï¼Ÿæœ‰ä¸¤ä¸ªæ–¹ä¾¿çš„å‡½æ•°æ¥æˆ‘ä»¬è¿›è¡Œé€‰æ‹©å’Œåˆ¤æ–­ï¼š
neighbors(p)æ¥è®¿é—®ä»på‡ºå‘ç›¸é‚»çš„ç‚¹
wall(p,q)æ¥åˆ¤æ–­æ¯ä¸ªä¸¤ç‚¹pä¸qä¹‹é—´æ˜¯å¦éš”ç€ä¸€å µå¢™

#### Solution 1: å›æº¯
ä»èµ·ç‚¹å‡ºå‘è¿›è¡Œæœç´¢ï¼Œè€Œä¸”æˆ‘ä»¬çš„åœ¨æ¯ä¸€ä¸ªç‚¹çš„ç­–ç•¥æ˜¯ï¼Œæ¯æ¬¡é‡åˆ°é€‰æ‹©å°±é€‰æ‹©ç¬¬ä¸€ä¸ªå¯è¡Œè§£ï¼ˆneighbors(p)å½“ä¸­ç»™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå¯ä»¥æ˜¯å‘å·¦è½¬å‰è¿›ä¸€æ ¼ï¼‰ã€‚ç›´åˆ°æˆ‘ä»¬æ²¡æœ‰é€‰æ‹©äº†å†å›å¤´ã€‚å¦‚æœæœ‰è§£ï¼ˆexitå¯åˆ°è¾¾ï¼‰ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰ä¸€æ¡è·¯å¾„æ˜¯è¿æ¥å‡ºå…¥å£çš„ï¼Œæˆ‘ä»¬æŠŠå®ƒè®°ä¸‹æ¥ã€‚

æ³¨æ„è¿™é‡Œâ€œç¬¬ä¸€ä¸ªå¯è¡Œè§£â€œå¯èƒ½ä¼šæ’é™¤ä»¥ä¸‹é€‰æ‹©ï¼š
* å·²ç»èµ°è¿‡çš„è·¯ï¼šä¸€èˆ¬ç”¨pathï¼ˆèµ°è¿‡çš„è·¯å¾„ï¼‰æˆ–è€…visï¼ˆé¢å¤–çš„æ ‡è®°æ•°ç»„ï¼‰æ¥æ ‡è®°
* èµ°ä¸é€šçš„è·¯ï¼šè¶Šç•Œã€éš”ç€å¢™ç­‰ä¸ç¬¦åˆæœ€åç­”æ¡ˆçš„é€‰æ‹©ã€‚
è¿™é“é¢˜é‡Œneighbors(p)å¸®æˆ‘ä»¬åšé€‰æ‹©ï¼Œwall(p,q)å¸®æˆ‘ä»¬æ’é™¤ä¸åˆæ³•é€‰æ‹©ã€‚

```python
def dfs(path, p):
    if p==exit:
        res.append(path)
        return
    for q in neighbors(s):
        if q in path: continue  # visited
        if wall(p, q): continue # it's a wall
        path.append(q)          # æ¢ç´¢
        dfs(path, q)
        path.pop()              # å›æº¯

res = []
dfs([enter], enter)
return res
```

#### Solution 2: éå›æº¯
åœ¨Pythonä¸­æœ‰ä¸€ä¸ªå·æ‡’çš„è§£æ³•ã€‚åœ¨éå›æº¯è§£æ³•ä¸­ï¼Œæˆ‘ä»¬+(__iadd__operator)æ¥åˆ›é€ ä¸€ä¸ªæ–°çš„listã€‚æ–°çš„listï¼ˆä¹Ÿéœ€è¦æ–°çš„ç©ºé—´ï¼‰ä¼šæ¥æ›¿æˆ‘ä»¬æœç´¢ï¼Œå°±ä¸éœ€è¦å›æº¯äº†ã€‚

```python
def dfs(path, p):
    if p==exit:
        res.append(path)
        return
    for q in neighbors(s):
        if q in path: continue  # visited
        if wall(p, q): continue # it's a wall
        dfs(path+[q], q)        # æ–°çš„path object!

res = []
dfs([enter], enter)
return res
```

#### Solution 3: å¯è¡Œè§£ä¸æ‰€æœ‰è§£
æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦æ‰¾åˆ°æ‰€æœ‰å¯è¡Œè§£ï¼Œè€Œæ˜¯åªéœ€æ‰¾åˆ°ä»»æ„å¯è¡Œè§£ã€‚é‚£ä¹ˆæˆ‘ä»¬æ—©æ—©çš„å°±å¯ä»¥é€€å‡ºé€’å½’å‡½æ•°ã€‚

```python
def dfs(path, p):
    if p==exit:
        res[:] = path
        return True
    for q in neighbors(s):
        if q in path: continue  # visited
        if wall(p, q): continue # it's a wall
        path.append(q)          # æ¢ç´¢
        if dfs(path, q):
            return True         # æ‰¾åˆ°å¯è¡Œè§£ï¼
        path.pop()              # å›æº¯
    return False                # æ²¡æœ‰å¯è¡Œè§£

res = []
dfs([enter], enter)
return res
```
